<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>–ì–ª–∞–≤–Ω–∞—è - –ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        :root {
            --primary: #667eea;
            --primary-dark: #5a6fd8;
            --secondary: #764ba2;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --light: #f8fafc;
            --dark: #1e293b;
            --gray: #64748b;
            --gray-light: #e2e8f0;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            min-height: 100vh;
            color: var(--dark);
            animation: fadeIn 1s ease-out;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* –®–∞–ø–∫–∞ */
        .header {
            background: white;
            border-radius: 16px;
            padding: 20px 30px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-lg);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 20px;
            z-index: 100;
            animation: slideDown 0.6s ease-out;
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
        }

        .header:hover {
            transform: translateY(-2px);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.15);
        }

        .logo {
            font-size: 28px;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: flex;
            align-items: center;
            gap: 10px;
            animation: logoFloat 3s ease-in-out infinite;
        }

        @keyframes logoFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
            animation: fadeInRight 0.8s ease-out;
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            border: 3px solid var(--primary);
            object-fit: cover;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: var(--shadow);
        }

        .user-avatar:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .nav-buttons {
            display: flex;
            gap: 12px;
            animation: fadeInLeft 0.8s ease-out;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            position: relative;
            overflow: hidden;
        }

        .btn:before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:hover:before {
            width: 300px;
            height: 300px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            box-shadow: var(--shadow);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: white;
            color: var(--dark);
            border: 2px solid #e2e8f0;
            box-shadow: var(--shadow-sm);
        }

        .btn-secondary:hover {
            border-color: var(--primary);
            transform: translateY(-3px);
            box-shadow: var(--shadow);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--danger) 0%, #dc2626 100%);
            color: white;
            box-shadow: var(--shadow);
        }

        .btn-danger:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(239, 68, 68, 0.3);
        }

        .notification-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--danger);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 11px;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */
        .main-content {
            display: grid;
            grid-template-columns: 280px 1fr 320px;
            gap: 24px;
            animation: fadeInUp 0.8s ease-out;
        }

        /* –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å–ª–µ–≤–∞ */
        .sidebar-left {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: var(--shadow-lg);
            height: fit-content;
            animation: slideInLeft 0.6s ease-out;
            border: 1px solid #e2e8f0;
        }

        .menu-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .menu-item {
            padding: 14px 16px;
            margin-bottom: 8px;
            border-radius: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .menu-item:before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 0;
            background: linear-gradient(90deg, var(--primary) 0%, transparent 100%);
            transition: width 0.3s ease;
        }

        .menu-item:hover:before {
            width: 100%;
        }

        .menu-item:hover {
            transform: translateX(10px);
            box-shadow: var(--shadow);
        }

        .menu-item.active {
            background: linear-gradient(135deg, var(--primary) 15%, var(--secondary) 100%);
            color: white;
            box-shadow: var(--shadow);
            animation: activePulse 2s infinite;
        }

        @keyframes activePulse {
            0%, 100% { box-shadow: var(--shadow); }
            50% { box-shadow: 0 0 20px rgba(102, 126, 234, 0.5); }
        }

        .menu-item i {
            font-size: 20px;
            width: 24px;
            text-align: center;
            position: relative;
            z-index: 1;
        }

        .menu-item span {
            position: relative;
            z-index: 1;
            font-weight: 500;
        }

        /* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è */
        .profile-stats {
            margin-top: 30px;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            animation: fadeIn 1s ease-out;
        }

        .stat-item {
            text-align: center;
            padding: 16px;
            background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
            border-radius: 12px;
            transition: all 0.3s ease;
            border: 1px solid #cbd5e1;
        }

        .stat-item:hover {
            transform: translateY(-5px);
            background: white;
            box-shadow: var(--shadow);
            border-color: var(--primary);
        }

        .stat-value {
            font-size: 28px;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 12px;
            color: var(--gray);
            font-weight: 500;
        }

        /* –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å */
        .feed {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–∞ */
        .create-post {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: var(--shadow-lg);
            animation: fadeInUp 0.7s ease-out;
            border: 1px solid #e2e8f0;
            transition: transform 0.3s ease;
        }

        .create-post:hover {
            transform: translateY(-3px);
        }

        .post-input-container {
            display: flex;
            gap: 16px;
            margin-bottom: 20px;
        }

        .post-avatar {
            width: 56px;
            height: 56px;
            border-radius: 14px;
            object-fit: cover;
            border: 3px solid var(--primary);
            transition: all 0.3s ease;
        }

        .post-avatar:hover {
            transform: scale(1.1) rotate(5deg);
        }

        .post-input-wrapper {
            flex: 1;
        }

        .post-input {
            width: 100%;
            padding: 16px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 15px;
            background: #f8fafc;
            resize: none;
            min-height: 60px;
            font-family: 'Inter', sans-serif;
            transition: all 0.3s ease;
        }

        .post-input:focus {
            outline: none;
            border-color: var(--primary);
            background: white;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            transform: translateY(-2px);
        }

        .post-actions {
            display: flex;
            justify-content: space-between;
            padding-top: 20px;
            border-top: 2px solid #e2e8f0;
        }

        .post-action-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 16px;
            border: none;
            background: none;
            color: var(--gray);
            cursor: pointer;
            border-radius: 10px;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .post-action-btn:hover {
            background: #f1f5f9;
            color: var(--primary);
            transform: translateY(-2px);
        }

        /* –ü–æ—Å—Ç—ã */
        .post {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: var(--shadow-lg);
            animation: fadeInUp 0.6s ease-out;
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
            animation-fill-mode: both;
        }

        .post:hover {
            transform: translateY(-5px);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.15);
        }

        .post-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
        }

        .post-author-avatar {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            object-fit: cover;
            border: 2px solid var(--primary);
            transition: transform 0.3s ease;
        }

        .post-author-avatar:hover {
            transform: scale(1.1);
        }

        .post-author-info {
            flex: 1;
        }

        .post-author-name {
            font-weight: 600;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .post-time {
            font-size: 13px;
            color: var(--gray);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .post-content {
            margin-bottom: 20px;
            line-height: 1.6;
            font-size: 15px;
        }

        .post-image {
            width: 100%;
            border-radius: 12px;
            margin-bottom: 20px;
            transition: transform 0.5s ease;
            cursor: zoom-in;
        }

        .post-image:hover {
            transform: scale(1.02);
        }

        .post-stats {
            display: flex;
            justify-content: space-between;
            padding: 16px 0;
            border-top: 2px solid #e2e8f0;
            border-bottom: 2px solid #e2e8f0;
            font-size: 14px;
            color: var(--gray);
            margin-bottom: 20px;
        }

        .post-actions-bar {
            display: flex;
            justify-content: space-around;
            padding-top: 10px;
        }

        /* –ü—Ä–∞–≤–∞—è –±–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å */
        .sidebar-right {
            display: flex;
            flex-direction: column;
            gap: 20px;
            animation: slideInRight 0.6s ease-out;
        }

        .friends-online, .trending-news, .birthdays {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: var(--shadow-lg);
            border: 1px solid #e2e8f0;
            transition: transform 0.3s ease;
        }

        .friends-online:hover, .trending-news:hover, .birthdays:hover {
            transform: translateY(-3px);
        }

        .section-title {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .friends-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .friend-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid #e2e8f0;
        }

        .friend-item:hover {
            background: #f8fafc;
            border-color: var(--primary);
            transform: translateX(5px);
            box-shadow: var(--shadow);
        }

        .friend-avatar {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            object-fit: cover;
            border: 2px solid #10b981;
            transition: all 0.3s ease;
        }

        .friend-avatar:hover {
            transform: rotate(10deg) scale(1.1);
        }

        .friend-info {
            flex: 1;
        }

        .friend-name {
            font-weight: 600;
            margin-bottom: 2px;
            font-size: 14px;
        }

        .friend-status {
            font-size: 12px;
            color: #10b981;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .news-item {
            padding: 12px 0;
            border-bottom: 1px solid #e2e8f0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .news-item:hover {
            transform: translateX(5px);
            padding-left: 8px;
            border-color: var(--primary);
        }

        .news-item:last-child {
            border-bottom: none;
        }

        .news-title {
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 6px;
            color: var(--dark);
        }

        .news-meta {
            font-size: 12px;
            color: var(--gray);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Emoji –ø–∞–ª–∏—Ç—Ä–∞ */
        .emoji-picker {
            position: fixed;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            z-index: 1000;
            display: none;
            max-width: 320px;
            animation: fadeInUp 0.3s ease-out;
        }

        .emoji-picker.active {
            display: block;
        }

        .emoji-grid {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 8px;
            max-height: 240px;
            overflow-y: auto;
            margin-bottom: 16px;
            padding: 10px;
        }

        .emoji {
            font-size: 24px;
            cursor: pointer;
            padding: 8px;
            text-align: center;
            border-radius: 8px;
            transition: all 0.2s ease;
        }

        .emoji:hover {
            background: #f1f5f9;
            transform: scale(1.2);
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes fadeInRight {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes fadeInLeft {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 16px 20px;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            animation: slideIn 0.3s ease;
            display: flex;
            align-items: center;
            gap: 12px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .notification.success {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.95) 0%, rgba(5, 150, 105, 0.95) 100%);
            color: white;
        }

        .notification.error {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.95) 0%, rgba(220, 38, 38, 0.95) 100%);
            color: white;
        }

        .notification.info {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.95) 0%, rgba(37, 99, 235, 0.95) 100%);
            color: white;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 1200px) {
            .main-content {
                grid-template-columns: 240px 1fr;
            }
            .sidebar-right {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            .sidebar-left {
                display: none;
            }
            .header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            .user-info {
                flex-direction: column;
            }
            .nav-buttons {
                justify-content: center;
                flex-wrap: wrap;
            }
        }

        /* –ö–∞—Å—Ç–æ–º–Ω—ã–π —Å–∫—Ä–æ–ª–ª–±–∞—Ä */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--secondary) 100%);
        }

        /* –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã */
        * {
            transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
        }

        /* –ó–∞–≥—Ä—É–∑–∫–∞ */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 40px;
            color: var(--gray);
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid #e2e8f0;
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* –≠—Ñ—Ñ–µ–∫—Ç —Å—Ç–µ–∫–ª–∞ */
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
<div class="container">
    <!-- –®–∞–ø–∫–∞ -->
    <div class="header glass-effect">
        <div class="logo">
            <i class="fas fa-comment-dots"></i>
            <span>–ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä</span>
        </div>

        <div class="user-info">
            <img src="/uploads/default-avatar.png" alt="–ê–≤–∞—Ç–∞—Ä" class="user-avatar" id="userAvatar">
            <div>
                <div id="username" style="font-weight: 600;">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                <small id="userStatus" style="color: #10b981; font-size: 12px;">
                    <i class="fas fa-circle"></i> –û–Ω–ª–∞–π–Ω
                </small>
            </div>
        </div>

        <div class="nav-buttons">
            <button class="btn btn-secondary" onclick="showNotifications()">
                <i class="fas fa-bell"></i>
                <span class="notification-badge" id="notificationCount" style="display: none;">0</span>
            </button>
            <a href="/profile.html" class="btn btn-secondary">
                <i class="fas fa-user"></i> –ü—Ä–æ—Ñ–∏–ª—å
            </a>
            <a href="/chat.html" class="btn btn-primary">
                <i class="fas fa-comments"></i> –ü–µ—Ä–µ–π—Ç–∏ –≤ —á–∞—Ç—ã
            </a>
            <a href="/api/v1/auth/logout" class="btn btn-danger">
                <i class="fas fa-sign-out-alt"></i> –í—ã–π—Ç–∏
            </a>
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="main-content">
        <!-- –õ–µ–≤–∞—è –±–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
        <div class="sidebar-left glass-effect">
            <ul class="menu-list">
                <li class="menu-item active" onclick="switchFeed('news')">
                    <i class="fas fa-newspaper"></i>
                    <span>–ù–æ–≤–æ—Å—Ç–∏</span>
                </li>
                <li class="menu-item" onclick="switchFeed('friends')">
                    <i class="fas fa-user-friends"></i>
                    <span>–î—Ä—É–∑—å—è</span>
                    <span class="notification-badge" style="position: absolute; right: 15px;">3</span>
                </li>
                <li class="menu-item" onclick="switchFeed('photos')">
                    <i class="fas fa-images"></i>
                    <span>–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏</span>
                </li>
                <li class="menu-item" onclick="switchFeed('groups')">
                    <i class="fas fa-users"></i>
                    <span>–°–æ–æ–±—â–µ—Å—Ç–≤–∞</span>
                </li>
                <li class="menu-item" onclick="switchFeed('music')">
                    <i class="fas fa-music"></i>
                    <span>–ú—É–∑—ã–∫–∞</span>
                </li>
                <li class="menu-item" onclick="switchFeed('videos')">
                    <i class="fas fa-video"></i>
                    <span>–í–∏–¥–µ–æ</span>
                </li>
            </ul>

            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è -->
            <div class="profile-stats" id="profileStats">
                <div class="stat-item">
                    <div class="stat-value" id="friendsCount">0</div>
                    <div class="stat-label">–î—Ä—É–∑–µ–π</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="postsCount">0</div>
                    <div class="stat-label">–ü–æ—Å—Ç–æ–≤</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="photosCount">0</div>
                    <div class="stat-label">–§–æ—Ç–æ</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="groupsCount">0</div>
                    <div class="stat-label">–°–æ–æ–±—â–µ—Å—Ç–≤</div>
                </div>
            </div>
        </div>

        <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å - –õ–µ–Ω—Ç–∞ -->
        <div class="feed" id="feed">
            <!-- –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–∞ -->
            <div class="create-post glass-effect">
                <div class="post-input-container">
                    <img src="/uploads/default-avatar.png" alt="–ê–≤–∞—Ç–∞—Ä" class="post-avatar" id="postUserAvatar">
                    <div class="post-input-wrapper">
                        <textarea
                                class="post-input"
                                placeholder="–ß—Ç–æ —É –≤–∞—Å –Ω–æ–≤–æ–≥–æ?"
                                id="postInput"
                        ></textarea>
                    </div>
                </div>
                <div class="post-actions">
                    <button class="post-action-btn" onclick="openEmojiPicker()">
                        <i class="far fa-smile"></i>
                        <span>–°–º–∞–π–ª—ã</span>
                    </button>
                    <button class="post-action-btn" onclick="document.getElementById('photoInput').click()">
                        <i class="fas fa-camera"></i>
                        <span>–§–æ—Ç–æ/–≤–∏–¥–µ–æ</span>
                    </button>
                    <button class="post-action-btn">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>–û—Ç–º–µ—Ç–∫–∞</span>
                    </button>
                    <button class="btn btn-primary" onclick="createPost()" id="postButton">
                        <i class="fas fa-paper-plane"></i>
                        <span>–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</span>
                    </button>
                </div>
                <input type="file" id="photoInput" accept="image/*,video/*" style="display: none;" multiple>
            </div>

            <!-- –õ–µ–Ω—Ç–∞ –ø–æ—Å—Ç–æ–≤ -->
            <div id="postsContainer">
                <div class="loading-post">
                    <div class="post glass-effect">
                        <div style="text-align: center; padding: 40px; color: var(--gray);">
                            <div style="font-size: 48px; margin-bottom: 20px; animation: float 3s ease-in-out infinite;">
                                <i class="fas fa-newspaper"></i>
                            </div>
                            <h3 style="margin-bottom: 10px;">–ù–æ–≤–æ—Å—Ç–Ω–∞—è –ª–µ–Ω—Ç–∞</h3>
                            <p style="margin-bottom: 5px;">–ó–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –ø–æ—Å—Ç—ã –≤–∞—à–∏—Ö –¥—Ä—É–∑–µ–π</p>
                            <p>–ù–∞–ø–∏—à–∏—Ç–µ –ø–µ—Ä–≤—ã–π –ø–æ—Å—Ç!</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ü—Ä–∞–≤–∞—è –±–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
        <div class="sidebar-right">
            <!-- –î—Ä—É–∑—å—è –æ–Ω–ª–∞–π–Ω -->
            <div class="friends-online glass-effect">
                <div class="section-title">
                    <i class="fas fa-circle" style="color: #10b981;"></i>
                    <span>–î—Ä—É–∑—å—è –æ–Ω–ª–∞–π–Ω</span>
                </div>
                <div class="friends-list" id="onlineFriends">
                    <div style="text-align: center; padding: 20px; color: var(--gray); font-size: 14px;">
                        <div class="spinner" style="width: 24px; height: 24px; margin: 0 auto 10px;"></div>
                        –ó–∞–≥—Ä—É–∑–∫–∞ –¥—Ä—É–∑–µ–π...
                    </div>
                </div>
            </div>

            <!-- –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ -->
            <div class="trending-news glass-effect">
                <div class="section-title">
                    <i class="fas fa-fire" style="color: #f59e0b;"></i>
                    <span>–ü–æ–ø—É–ª—è—Ä–Ω–æ–µ</span>
                </div>
                <div class="news-list">
                    <div class="news-item">
                        <div class="news-title">–ó–∞–ø—É—â–µ–Ω –Ω–æ–≤—ã–π –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä</div>
                        <div class="news-meta">
                            <span><i class="far fa-clock"></i> –°–µ–≥–æ–¥–Ω—è</span>
                            <span><i class="far fa-heart"></i> 245</span>
                        </div>
                    </div>
                    <div class="news-item">
                        <div class="news-title">–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞</div>
                        <div class="news-meta">
                            <span><i class="far fa-clock"></i> –í—á–µ—Ä–∞</span>
                            <span><i class="far fa-heart"></i> 189</span>
                        </div>
                    </div>
                    <div class="news-item">
                        <div class="news-title">–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —á–∞—Ç–æ–≤</div>
                        <div class="news-meta">
                            <span><i class="far fa-clock"></i> 2 –¥–Ω—è –Ω–∞–∑–∞–¥</span>
                            <span><i class="far fa-heart"></i> 156</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –î–Ω–∏ —Ä–æ–∂–¥–µ–Ω–∏—è -->
            <div class="birthdays glass-effect">
                <div class="section-title">
                    <i class="fas fa-birthday-cake" style="color: #ec4899;"></i>
                    <span>–î–Ω–∏ —Ä–æ–∂–¥–µ–Ω–∏—è</span>
                </div>
                <div class="friends-list" id="birthdaysList">
                    <div class="friend-item">
                        <div class="friend-avatar" style="background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%); color: white; display: flex; align-items: center; justify-content: center; font-weight: 600;">
                            –ê–ü
                        </div>
                        <div class="friend-info">
                            <div class="friend-name">–ê–ª–µ–∫—Å–µ–π –ü–µ—Ç—Ä–æ–≤</div>
                            <div class="friend-status"><i class="fas fa-gift"></i> –°–µ–≥–æ–¥–Ω—è</div>
                        </div>
                    </div>
                    <div class="friend-item">
                        <div class="friend-avatar" style="background: linear-gradient(135deg, #ec4899 0%, #8b5cf6 100%); color: white; display: flex; align-items: center; justify-content: center; font-weight: 600;">
                            –ú–ò
                        </div>
                        <div class="friend-info">
                            <div class="friend-name">–ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–∞</div>
                            <div class="friend-status"><i class="fas fa-gift"></i> –ó–∞–≤—Ç—Ä–∞</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Emoji –ø–∞–ª–∏—Ç—Ä–∞ -->
<div class="emoji-picker glass-effect" id="emojiPicker">
    <div class="emoji-grid" id="emojiGrid">
        <!-- Emoji –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
    </div>
    <button class="btn btn-secondary" onclick="closeEmojiPicker()" style="width: 100%; padding: 10px;">
        <i class="fas fa-times"></i> –ó–∞–∫—Ä—ã—Ç—å
    </button>
</div>

<!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
<div id="notifications"></div>

<script>
    // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
    let currentUser = null;
    let currentFeed = 'news';
    let selectedFiles = [];
    let emojis = ['üòÄ', 'üòÇ', 'ü•∞', 'üòé', 'ü§î', 'üòç', 'üëç', 'üëè', 'üéâ', '‚ù§Ô∏è', 'üî•', 'üíØ', '‚ú®', 'üåü', 'üôå', 'ü§ó', 'üòä', 'üòá', 'ü•≥', 'üòú'];

    // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    document.addEventListener('DOMContentLoaded', function() {
        loadUserProfile();
        loadOnlineFriends();
        loadPosts();
        loadProfileStats();
        initEmojiPicker();
        setupWebSocket();
        setupAnimations();
    });

    // ========== –ù–ê–°–¢–†–û–ô–ö–ê –ê–ù–ò–ú–ê–¶–ò–ô ==========
    function setupAnimations() {
        // –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫–∏
        const buttons = document.querySelectorAll('.btn');
        buttons.forEach(btn => {
            btn.addEventListener('mouseenter', () => {
                btn.style.transform = 'translateY(-3px)';
            });

            btn.addEventListener('mouseleave', () => {
                btn.style.transform = 'translateY(0)';
            });
        });

        // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—Å—Ç–æ–≤ –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.animation = 'fadeInUp 0.6s ease-out';
                    entry.target.style.animationFillMode = 'both';
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('.post').forEach(post => {
            observer.observe(post);
        });

        // –ê–Ω–∏–º–∞—Ü–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        const stats = document.querySelectorAll('.stat-value');
        stats.forEach(stat => {
            const finalValue = parseInt(stat.textContent);
            let currentValue = 0;
            const increment = finalValue / 50;
            const timer = setInterval(() => {
                currentValue += increment;
                if (currentValue >= finalValue) {
                    stat.textContent = finalValue;
                    clearInterval(timer);
                } else {
                    stat.textContent = Math.floor(currentValue);
                }
            }, 30);
        });
    }

    // ========== –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨ ==========
    async function loadUserProfile() {
        try {
            const response = await fetch('/api/v1/users/profile');
            if (!response.ok) {
                if (response.status === 401) {
                    window.location.href = '/login.html';
                    return;
                }
                throw new Error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è');
            }

            currentUser = await response.json();
            updateUserDisplay(currentUser);

        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è:', error);
            document.getElementById('username').textContent = '–ì–æ—Å—Ç—å';
            document.getElementById('userStatus').innerHTML = '<i class="fas fa-circle"></i> –û—Ñ—Ñ–ª–∞–π–Ω';
            document.getElementById('userStatus').style.color = '#ef4444';
        }
    }

    function updateUserDisplay(user) {
        const usernameEl = document.getElementById('username');
        const statusEl = document.getElementById('userStatus');

        usernameEl.textContent = user.username || user.login;
        statusEl.innerHTML = user.isOnline
            ? '<i class="fas fa-circle"></i> –û–Ω–ª–∞–π–Ω'
            : '<i class="fas fa-circle"></i> –û—Ñ—Ñ–ª–∞–π–Ω';
        statusEl.style.color = user.isOnline ? '#10b981' : '#ef4444';

        // –û–±–Ω–æ–≤–ª—è–µ–º –∞–≤–∞—Ç–∞—Ä—ã
        const avatars = document.querySelectorAll('.user-avatar, .post-avatar');
        avatars.forEach(avatar => {
            if (user.avatarUrl) {
                avatar.src = user.avatarUrl;
                avatar.onload = () => {
                    avatar.style.transform = 'scale(1.1)';
                    setTimeout(() => avatar.style.transform = '', 300);
                };
            }
        });
    }

    // ========== –õ–ï–ù–¢–ê ==========
    function switchFeed(feedType) {
        currentFeed = feedType;

        // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –ø—É–Ω–∫—Ç –º–µ–Ω—é —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
        document.querySelectorAll('.menu-item').forEach(item => {
            if (item.classList.contains('active')) {
                item.style.animation = 'fadeOut 0.3s ease';
                setTimeout(() => {
                    item.classList.remove('active');
                    item.style.animation = '';
                }, 300);
            }
        });

        event.target.closest('.menu-item').classList.add('active');
        event.target.closest('.menu-item').style.animation = 'activePulse 2s infinite';

        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–æ—Å—Ç—ã
        loadPosts();
    }

    async function loadPosts() {
        const postsContainer = document.getElementById('postsContainer');
        postsContainer.innerHTML = `
            <div class="loading-post">
                <div class="post glass-effect">
                    <div style="text-align: center; padding: 40px; color: var(--gray);">
                        <div class="spinner" style="width: 40px; height: 40px; margin: 0 auto 20px;"></div>
                        <p>–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Å—Ç–æ–≤...</p>
                    </div>
                </div>
            </div>
        `;

        try {
            // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
            setTimeout(() => {
                renderPosts(getMockPosts());
                setupPostAnimations();
            }, 1000);

        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ—Å—Ç–æ–≤:', error);
            postsContainer.innerHTML = `
                <div class="post glass-effect">
                    <div style="text-align: center; padding: 40px; color: var(--danger);">
                        <i class="fas fa-exclamation-triangle" style="font-size: 48px; margin-bottom: 20px;"></i>
                        <p>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ—Å—Ç–æ–≤</p>
                        <button onclick="loadPosts()" class="btn btn-secondary" style="margin-top: 10px;">
                            <i class="fas fa-redo"></i> –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞
                        </button>
                    </div>
                </div>
            `;
        }
    }

    function getMockPosts() {
        return [
            {
                id: 1,
                author: {
                    name: '–ê–ª–µ–∫—Å–µ–π –ü–µ—Ç—Ä–æ–≤',
                    avatar: 'https://i.pravatar.cc/150?img=1',
                    online: true
                },
                content: '–ü—Ä–∏–≤–µ—Ç –≤—Å–µ–º! –¢–æ–ª—å–∫–æ —á—Ç–æ –∑–∞–ø—É—Å—Ç–∏–ª –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç - –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä —Å –æ–Ω–ª–∞–π–Ω —Å—Ç–∞—Ç—É—Å–∞–º–∏! üöÄ',
                time: '2 —á–∞—Å–∞ –Ω–∞–∑–∞–¥',
                likes: 24,
                comments: 5,
                shares: 3,
                hasImage: true,
                imageUrl: 'https://images.unsplash.com/photo-1611605698323-b1e99cfd37ea?w=800&auto=format&fit=crop'
            },
            {
                id: 2,
                author: {
                    name: '–ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–∞',
                    avatar: 'https://i.pravatar.cc/150?img=2',
                    online: true
                },
                content: '–ö—Ä–∞—Å–∏–≤—ã–π –∑–∞–∫–∞—Ç —Å–µ–≥–æ–¥–Ω—è üåÖ #–ø—Ä–∏—Ä–æ–¥–∞ #–æ—Ç–¥—ã—Ö',
                time: '5 —á–∞—Å–æ–≤ –Ω–∞–∑–∞–¥',
                likes: 42,
                comments: 12,
                shares: 7,
                hasImage: false
            }
        ];
    }

    function renderPosts(posts) {
        const postsContainer = document.getElementById('postsContainer');
        postsContainer.innerHTML = '';

        posts.forEach((post, index) => {
            const postElement = document.createElement('div');
            postElement.className = 'post glass-effect';
            postElement.style.animationDelay = `${index * 0.1}s`;

            postElement.innerHTML = `
                <div class="post-header">
                    <img src="${post.author.avatar}" alt="–ê–≤–∞—Ç–∞—Ä" class="post-author-avatar">
                    <div class="post-author-info">
                        <div class="post-author-name">
                            ${post.author.name}
                            ${post.author.online ? '<span style="color: #10b981; font-size: 12px;"><i class="fas fa-circle"></i></span>' : ''}
                        </div>
                        <div class="post-time">
                            <i class="far fa-clock"></i> ${post.time}
                        </div>
                    </div>
                    <button class="post-action-btn" style="margin-left: auto;">
                        <i class="fas fa-ellipsis-h"></i>
                    </button>
                </div>
                <div class="post-content">${post.content}</div>
                ${post.hasImage ? `
                    <img src="${post.imageUrl}" alt="–ü–æ—Å—Ç" class="post-image"
                         onclick="zoomImage(this)">
                ` : ''}
                <div class="post-stats">
                    <span><i class="far fa-heart"></i> ${post.likes}</span>
                    <span><i class="far fa-comment"></i> ${post.comments} –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤</span>
                    <span><i class="fas fa-share"></i> ${post.shares} —Ä–µ–ø–æ—Å—Ç–æ–≤</span>
                </div>
                <div class="post-actions-bar">
                    <button class="post-action-btn" onclick="likePost(${post.id})">
                        <i class="far fa-heart"></i>
                        <span>–ù—Ä–∞–≤–∏—Ç—Å—è</span>
                    </button>
                    <button class="post-action-btn" onclick="commentPost(${post.id})">
                        <i class="far fa-comment"></i>
                        <span>–ö–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å</span>
                    </button>
                    <button class="post-action-btn" onclick="sharePost(${post.id})">
                        <i class="fas fa-share"></i>
                        <span>–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</span>
                    </button>
                </div>
            `;
            postsContainer.appendChild(postElement);
        });

        if (posts.length === 0) {
            postsContainer.innerHTML = `
                <div class="post glass-effect">
                    <div style="text-align: center; padding: 40px; color: var(--gray);">
                        <div style="font-size: 48px; margin-bottom: 20px; animation: float 3s ease-in-out infinite;">
                            <i class="fas fa-newspaper"></i>
                        </div>
                        <h3>–õ–µ–Ω—Ç–∞ –ø—É—Å—Ç–∞</h3>
                        <p>–ù–∞–ø–∏—à–∏—Ç–µ –ø–µ—Ä–≤—ã–π –ø–æ—Å—Ç –∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –¥—Ä—É–∑–µ–π!</p>
                    </div>
                </div>
            `;
        }
    }

    function setupPostAnimations() {
        const posts = document.querySelectorAll('.post');
        posts.forEach((post, index) => {
            post.style.opacity = '0';
            post.style.transform = 'translateY(20px)';

            setTimeout(() => {
                post.style.transition = 'all 0.6s ease';
                post.style.opacity = '1';
                post.style.transform = 'translateY(0)';
            }, index * 100);
        });
    }

    function createPost() {
        const postInput = document.getElementById('postInput');
        const content = postInput.value.trim();

        if (!content && selectedFiles.length === 0) {
            showNotification('–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ç–æ!', 'error');
            return;
        }

        // –ò–º–∏—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å—Ç–∞
        const newPost = {
            id: Date.now(),
            author: {
                name: currentUser?.username || '–í—ã',
                avatar: currentUser?.avatarUrl || '/uploads/default-avatar.png',
                online: true
            },
            content: content || '',
            time: '—Ç–æ–ª—å–∫–æ —á—Ç–æ',
            likes: 0,
            comments: 0,
            shares: 0,
            hasImage: selectedFiles.length > 0,
            imageUrl: selectedFiles.length > 0 ? URL.createObjectURL(selectedFiles[0]) : null
        };

        // –ê–Ω–∏–º–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å—Ç–∞
        const postsContainer = document.getElementById('postsContainer');
        const postElement = document.createElement('div');
        postElement.className = 'post glass-effect';
        postElement.style.opacity = '0';
        postElement.style.transform = 'scale(0.8)';

        postElement.innerHTML = `
            <div class="post-header">
                <img src="${newPost.author.avatar}" alt="–ê–≤–∞—Ç–∞—Ä" class="post-author-avatar">
                <div class="post-author-info">
                    <div class="post-author-name">
                        ${newPost.author.name}
                        <span style="color: #10b981; font-size: 12px;"><i class="fas fa-circle"></i></span>
                    </div>
                    <div class="post-time">
                        <i class="far fa-clock"></i> ${newPost.time}
                    </div>
                </div>
            </div>
            <div class="post-content">${newPost.content}</div>
            ${newPost.hasImage ? `<img src="${newPost.imageUrl}" alt="–ü–æ—Å—Ç" class="post-image">` : ''}
            <div class="post-stats">
                <span><i class="far fa-heart"></i> ${newPost.likes}</span>
                <span><i class="far fa-comment"></i> ${newPost.comments} –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤</span>
                <span><i class="fas fa-share"></i> ${newPost.shares} —Ä–µ–ø–æ—Å—Ç–æ–≤</span>
            </div>
            <div class="post-actions-bar">
                <button class="post-action-btn" onclick="likePost(${newPost.id})">
                    <i class="far fa-heart"></i>
                    <span>–ù—Ä–∞–≤–∏—Ç—Å—è</span>
                </button>
                <button class="post-action-btn" onclick="commentPost(${newPost.id})">
                    <i class="far fa-comment"></i>
                    <span>–ö–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å</span>
                </button>
                <button class="post-action-btn" onclick="sharePost(${newPost.id})">
                    <i class="fas fa-share"></i>
                    <span>–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</span>
                </button>
            </div>
        `;

        postsContainer.insertBefore(postElement, postsContainer.firstChild);

        // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
        setTimeout(() => {
            postElement.style.transition = 'all 0.6s ease';
            postElement.style.opacity = '1';
            postElement.style.transform = 'scale(1)';

            // –ê–Ω–∏–º–∞—Ü–∏—è —Å–µ—Ä–¥–µ—á–∫–∞
            const likeBtn = postElement.querySelector('.post-action-btn');
            likeBtn.style.animation = 'pulse 1s';
            setTimeout(() => likeBtn.style.animation = '', 1000);
        }, 10);

        // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
        postInput.value = '';
        selectedFiles = [];
        document.getElementById('photoInput').value = '';

        // –ê–Ω–∏–º–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        const postCountEl = document.getElementById('postsCount');
        let currentCount = parseInt(postCountEl.textContent) || 0;
        postCountEl.textContent = currentCount + 1;
        postCountEl.style.animation = 'pulse 1s';
        setTimeout(() => postCountEl.style.animation = '', 1000);

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        showNotification('–ü–æ—Å—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω!', 'success');
    }

    // ========== –î–†–£–ó–¨–Ø –û–ù–õ–ê–ô–ù ==========
    async function loadOnlineFriends() {
        try {
            // –ó–∞–≥–ª—É—à–∫–∞ —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
            const onlineFriendsContainer = document.getElementById('onlineFriends');
            onlineFriendsContainer.innerHTML = `
                <div class="friend-item">
                    <div class="friend-avatar" style="background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%); animation: pulse 2s infinite;"></div>
                    <div class="friend-info">
                        <div class="friend-name" style="animation: pulse 2s infinite 0.2s;">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                        <div class="friend-status" style="animation: pulse 2s infinite 0.4s;">
                            <i class="fas fa-circle"></i> –û–Ω–ª–∞–π–Ω
                        </div>
                    </div>
                </div>
            `;

            setTimeout(() => {
                renderOnlineFriends([
                    { id: 1, username: '–ê–ª–µ–∫—Å–µ–π –ü–µ—Ç—Ä–æ–≤', login: 'alex', isOnline: true },
                    { id: 2, username: '–ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–∞', login: 'maria', isOnline: true }
                ]);
            }, 1500);
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥—Ä—É–∑–µ–π –æ–Ω–ª–∞–π–Ω:', error);
        }
    }

    function renderOnlineFriends(friends) {
        const onlineFriendsContainer = document.getElementById('onlineFriends');

        if (!friends || friends.length === 0) {
            onlineFriendsContainer.innerHTML = `
                <div style="text-align: center; padding: 20px; color: var(--gray); font-size: 14px;">
                    <i class="fas fa-user-friends" style="font-size: 24px; margin-bottom: 10px; display: block;"></i>
                    –ù–µ—Ç –¥—Ä—É–∑–µ–π –æ–Ω–ª–∞–π–Ω
                </div>
            `;
            return;
        }

        onlineFriendsContainer.innerHTML = '';
        friends.forEach((friend, index) => {
            const friendElement = document.createElement('div');
            friendElement.className = 'friend-item';
            friendElement.style.animationDelay = `${index * 0.1}s`;
            friendElement.style.opacity = '0';
            friendElement.style.transform = 'translateX(20px)';

            const colors = ['#667eea', '#764ba2', '#f093fb', '#f5576c', '#4facfe', '#00f2fe'];
            const color = colors[friend.id % colors.length];

            friendElement.innerHTML = `
                <div class="friend-avatar" style="background: linear-gradient(135deg, ${color} 0%, ${color}80 100%);
                    display: flex; align-items: center; justify-content: center; color: white; font-weight: 600;">
                    ${friend.username ? friend.username.charAt(0) : '?'}
                </div>
                <div class="friend-info">
                    <div class="friend-name">${friend.username || friend.login}</div>
                    <div class="friend-status">
                        <i class="fas fa-circle"></i> –û–Ω–ª–∞–π–Ω
                    </div>
                </div>
            `;

            onlineFriendsContainer.appendChild(friendElement);

            // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
            setTimeout(() => {
                friendElement.style.transition = 'all 0.6s ease';
                friendElement.style.opacity = '1';
                friendElement.style.transform = 'translateX(0)';
            }, index * 100);
        });
    }

    // ========== –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–†–û–§–ò–õ–Ø ==========
    async function loadProfileStats() {
        // –ê–Ω–∏–º–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        const stats = ['friendsCount', 'postsCount', 'photosCount', 'groupsCount'];
        stats.forEach((statId, index) => {
            const el = document.getElementById(statId);
            el.style.opacity = '0.5';
            el.style.transform = 'scale(0.8)';

            setTimeout(() => {
                el.style.transition = 'all 0.6s ease';
                el.style.opacity = '1';
                el.style.transform = 'scale(1)';
            }, index * 200);
        });

        setTimeout(() => {
            document.getElementById('friendsCount').textContent = '12';
            document.getElementById('postsCount').textContent = '47';
            document.getElementById('photosCount').textContent = '89';
            document.getElementById('groupsCount').textContent = '8';
        }, 1000);
    }

    // ========== EMOJI ==========
    function initEmojiPicker() {
        const emojiGrid = document.getElementById('emojiGrid');
        emojis.forEach(emoji => {
            const emojiElement = document.createElement('div');
            emojiElement.className = 'emoji';
            emojiElement.textContent = emoji;
            emojiElement.onclick = () => insertEmoji(emoji);
            emojiGrid.appendChild(emojiElement);
        });
    }

    function openEmojiPicker() {
        const picker = document.getElementById('emojiPicker');
        picker.classList.add('active');
        picker.style.position = 'fixed';

        const button = event.target.closest('.post-action-btn');
        const rect = button.getBoundingClientRect();
        picker.style.top = (rect.bottom + 5) + 'px';
        picker.style.left = (rect.left - 100) + 'px';

        // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
        picker.style.transform = 'scale(0.8)';
        picker.style.opacity = '0';
        setTimeout(() => {
            picker.style.transition = 'all 0.3s ease';
            picker.style.transform = 'scale(1)';
            picker.style.opacity = '1';
        }, 10);
    }

    function closeEmojiPicker() {
        const picker = document.getElementById('emojiPicker');
        picker.style.transform = 'scale(1)';
        picker.style.opacity = '1';
        picker.style.transition = 'all 0.3s ease';
        picker.style.transform = 'scale(0.8)';
        picker.style.opacity = '0';

        setTimeout(() => {
            picker.classList.remove('active');
            picker.style.transform = '';
            picker.style.opacity = '';
        }, 300);
    }

    function insertEmoji(emoji) {
        const postInput = document.getElementById('postInput');
        const cursorPos = postInput.selectionStart;
        const textBefore = postInput.value.substring(0, cursorPos);
        const textAfter = postInput.value.substring(cursorPos);

        postInput.value = textBefore + emoji + textAfter;
        postInput.focus();
        postInput.setSelectionRange(cursorPos + emoji.length, cursorPos + emoji.length);

        // –ê–Ω–∏–º–∞—Ü–∏—è –≤—Å—Ç–∞–≤–∫–∏ —ç–º–æ–¥–∑–∏
        postInput.style.transform = 'scale(1.02)';
        setTimeout(() => postInput.style.transform = 'scale(1)', 200);

        closeEmojiPicker();
    }

    // ========== –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø ==========
    function showNotification(message, type = 'info') {
        const notifications = document.getElementById('notifications');
        const notification = document.createElement('div');
        notification.className = `notification ${type}`;
        notification.innerHTML = `
            <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
            <span>${message}</span>
        `;

        notification.style.transform = 'translateX(100%)';
        notification.style.opacity = '0';

        notifications.appendChild(notification);

        // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
        setTimeout(() => {
            notification.style.transition = 'all 0.5s ease';
            notification.style.transform = 'translateX(0)';
            notification.style.opacity = '1';
        }, 10);

        // –ê–Ω–∏–º–∞—Ü–∏—è –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è
        setTimeout(() => {
            notification.style.transform = 'translateX(100%)';
            notification.style.opacity = '0';
            setTimeout(() => notification.remove(), 500);
        }, 4000);
    }

    // ========== –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ==========
    function likePost(postId) {
        const likeBtn = event.target.closest('.post-action-btn');
        likeBtn.style.animation = 'pulse 0.5s';

        const likeIcon = likeBtn.querySelector('i');
        likeIcon.classList.remove('far');
        likeIcon.classList.add('fas');
        likeIcon.style.color = '#ef4444';

        setTimeout(() => {
            likeBtn.style.animation = '';
            showNotification('–õ–∞–π–∫ –¥–æ–±–∞–≤–ª–µ–Ω!', 'success');
        }, 500);
    }

    function commentPost(postId) {
        const postInput = document.getElementById('postInput');
        postInput.focus();
        postInput.value = `@${postId} `;
        postInput.style.animation = 'pulse 1s';
        setTimeout(() => postInput.style.animation = '', 1000);
    }

    function sharePost(postId) {
        const shareBtn = event.target.closest('.post-action-btn');
        shareBtn.style.animation = 'pulse 0.5s';
        setTimeout(() => {
            shareBtn.style.animation = '';
            showNotification('–ü–æ—Å—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –≤–∞—à—É –ª–µ–Ω—Ç—É!', 'success');
        }, 500);
    }

    function showNotifications() {
        showNotification('–ó–¥–µ—Å—å –±—É–¥—É—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è', 'info');
    }

    function zoomImage(img) {
        img.style.transform = 'scale(1.5)';
        img.style.transition = 'transform 0.5s ease';
        img.style.zIndex = '1000';
        img.style.position = 'relative';

        setTimeout(() => {
            img.style.transform = 'scale(1)';
            setTimeout(() => {
                img.style.zIndex = '';
                img.style.position = '';
            }, 500);
        }, 2000);
    }

    // ========== WEB SOCKET ==========
    function setupWebSocket() {
        // –ü–æ–∫–∞ —á—Ç–æ –ø—Ä–æ—Å—Ç–æ –æ–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å
        setInterval(() => {
            if (currentUser) {
                updateUserStatus();
            }
        }, 30000);
    }

    async function updateUserStatus() {
        try {
            const response = await fetch('/api/v1/presence/ping', { method: 'POST' });
            if (response.ok) {
                const userStatus = document.getElementById('userStatus');
                userStatus.style.animation = 'pulse 1s';
                setTimeout(() => userStatus.style.animation = '', 1000);
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞:', error);
        }
    }

    // –ó–∞–∫—Ä—ã—Ç–∏–µ emoji picker –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
    document.addEventListener('click', function(e) {
        const picker = document.getElementById('emojiPicker');
        if (picker.classList.contains('active') && !picker.contains(e.target) &&
            !e.target.closest('.post-action-btn')) {
            closeEmojiPicker();
        }
    });

    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∫–∞–∂–¥—ã–µ 2 –º–∏–Ω—É—Ç—ã
    setInterval(loadProfileStats, 120000);

    // –û–±–Ω–æ–≤–ª—è–µ–º –¥—Ä—É–∑–µ–π –æ–Ω–ª–∞–π–Ω –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
    setInterval(loadOnlineFriends, 60000);

    // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–π
    const style = document.createElement('style');
    style.textContent = `
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
    `;
    document.head.appendChild(style);
</script>
</body>
</html>